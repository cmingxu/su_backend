!!!
%html
  %head
    %meta{name: "viewport", content: "width=device-width, initial-scale=1"}
    = javascript_include_tag 'plugin'
    = stylesheet_link_tag 'plugin'
    = csrf_meta_tag

  %body{'ng-app' => 'building'}
    .uk-container.uk-container-center.su-container{'ng-controller' => 'Main'}
      .data-channel
        %input#data_transfer_channel{type: 'hidden'}

      .uk-grid#model_profile
        .uk-width-1-3{"ng-show" => "current_entity.type"}
          %img{'ng-src' => "{{current_entity.thumbnail_src}}", 'width' => 123, 'class' => "data-uk-margin"}
        .uk-width-2-3{"ng-show" => "current_entity.type"}
          = form_tag "", method: "post", class: "uk-form" do
            %input.uk-form-small.uk-margin-bottom.uk-float-right.fc-name-field{'ng-model' => "current_entity.name", 'ng-change' => "current_component_definition_name_change()"}
            .uk-clearfix
          #action_bar
            %button.uk-button.uk-button-small.uk-primary.uk-float-right{"ng-disabled" => "{{current_entity.type != 'edge'}}"} 替换
            %button.uk-button.uk-button-small.uk-primary.uk-float-right.uk-margin-right{'ng-click' => "bridge('save_current_component_definition')", "ng-disabled" => "{{!current_entity.name && current_entity.type == 'component_definition'}}"} 保存
        .uk-width-3-3{"ng-show" => "!current_entity.type"}
          .uk-alert.uk-alert-success 请选择一个模型

      #models
        %ui-view

      #ad

      #user_profile.uk-container
        %div{"ng-show" => "!CurrentUser.isLogin()"}
          %button.uk-button.uk-button-primary.uk-float-right.uk-margin-right{"ui-sref" => "register"} 我要注册
          %button.uk-button.uk-button-primary.uk-float-right.uk-margin-right{"ui-sref" => "login"} 我要登录

        %div{"ng-show" => "CurrentUser.isLogin()"}
          .uk-alert.uk-alert-success 构建中国 cming.xu@gmail.com
          %button.uk-button.uk-button-primary.uk-float-right.uk-margin-right{"ng-click" => "sign_out()"} 退出


